<html>
<head>
  <title>Tally Pi Dashboard</title>
</head>

<body>
  <div width=330 id="tallyLight">Light 01</div>

  <script type="text/javascript">
    const tallyLight = 'localhost';
    const request = new XMLHttpRequest();
    request.open("GET", `http://${tallyLight}:7413/status`, true);

    request.onload = function(evt) {
      const response = JSON.parse(request.responseText);
      const color = `#${response.red.toString(16).padStart(2, '0')}${response.green.toString(16).padStart(2, '0')}${response.blue.toString(16).padStart(2, '0')}`;
      document.getElementById("tallyLight").style.backgroundColor = color;
    };

    request.send();
  </script>
</body>
</html>
